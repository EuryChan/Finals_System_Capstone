{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DILG Employees Profile</title>
  <link rel="stylesheet" href="{% static 'CSS/dashboard.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #e9ecef;
      --text-primary: #212529;
      --text-secondary: #6c757d;
      --text-muted: #868e96;
      --border-color: #dee2e6;
      --shadow: 0 2px 4px rgba(0,0,0,0.1);
      --shadow-hover: 0 4px 8px rgba(0,0,0,0.15);
      --accent-primary: #007bff;
      --accent-hover: #0056b3;
      --success: #28a745;
      --success-hover: #218838;
      --warning: #ffc107;
      --danger: #dc3545;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      color: var(--text-primary);
      background: var(--bg-secondary);
      overflow-x: hidden;
    }

    .dashboard-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar Styling */
    .sidebar {
      width: 260px;
      background: linear-gradient(to bottom, #f5f6fa, #0b1a50);
      color: #0b1a50;
      border-right: 1px solid var(--border-color);
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
    }

    .sidebar .logo {
      width: 140px;
      margin: 24px auto;
      display: block;
    }

    .menu-title {
      padding: 16px 24px;
      font-weight: 600;
      color: var(--text-muted);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }


    /* Main Content Area */
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 32px;
      background: linear-gradient(to bottom, #f5f6fa, #0b1a50);
      color: #0b1a50;
      min-height: 100vh;
    }

    /* Header */
    .header {
      margin-bottom: 32px;
      padding-bottom: 24px;
      border-bottom: 2px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .back-button {
      padding: 10px 20px;
      background: var(--accent-primary);
      color: white;
      border: none;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .back-button:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    /* Action Bar */
    .action-bar {
      border-radius: 8px;
      padding: 20px 24px;
      margin-bottom: 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .search-container {
      flex: 1;
      max-width: 400px;
      min-width: 250px;
    }

    .search-form {
      display: flex;
      background: var(--bg-secondary);
      border-radius: 25px;
      overflow: hidden;
      border: 2px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .search-form:focus-within {
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .search-bar {
      flex: 1;
      padding: 12px 20px;
      border: none;
      outline: none;
      font-size: 0.9375rem;
      background: transparent;
    }

    .search-btn {
      background: var(--accent-primary);
      color: white;
      border: none;
      padding: 12px 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .search-btn:hover {
      background: var(--accent-hover);
    }

    .add-button {
      background: var(--success);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9375rem;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .add-button:hover {
      background: var(--success-hover);
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    /* View Toggle Buttons */
    .view-toggle-btn {
      background: transparent;
      color: var(--text-secondary);
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .view-toggle-btn:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    .view-toggle-btn.active {
      background: var(--accent-primary);
      color: white;
    }

    /* Restore Button */
    .restore-button {
      background: var(--success);
      color: white;
    }

    .restore-button:hover {
      background: var(--success-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    }

    /* Archived Card Style */
    .profile-card.archived {
      border-left-color: var(--text-muted);
      opacity: 0.85;
    }

    .profile-card.archived::before {
      background: var(--text-muted);
    }

    /* Card Grid */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    /* Profile Cards */
    .profile-card {
      background: var(--bg-primary);
      border-radius: 8px;
      padding: 24px;
      box-shadow: var(--shadow);
      border-left: 4px solid var(--accent-primary);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .profile-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: var(--accent-primary);
      opacity: 0.03;
      border-radius: 50%;
      transform: translate(30%, -30%);
    }

    .profile-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }

    .avatar-placeholder {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-primary) 0%, #0056b3 100%);
      margin: 0 auto 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 28px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .profile-card h3 {
      font-size: 1.25rem;
      color: var(--text-primary);
      margin-bottom: 12px;
      text-align: center;
      font-weight: 600;
    }

    .profile-card p {
      color: var(--text-secondary);
      margin-bottom: 8px;
      font-size: 0.9375rem;
      text-align: center;
    }

    .profile-card p strong {
      color: var(--text-primary);
      font-weight: 600;
    }

    .task-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.8125rem;
      font-weight: 600;
      margin: 8px auto;
      text-align: center;
      background: var(--accent-primary);
      color: white;
    }

    .action-buttons-container {
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
      margin-top: 16px;
    }

    .edit-button,
    .archive-button {
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      flex: 1;
    }

    .edit-button {
      background: var(--accent-primary);
      color: white;
    }

    .edit-button:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .archive-button {
      background: var(--warning);
      color: #212529;
    }

    .archive-button:hover {
      background: #e0a800;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
    }

    /* Modal Overlay */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: white;
      border-radius: 12px;
      padding: 30px;
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      transform: scale(0.7);
      opacity: 0;
      transition: all 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: scale(1);
      opacity: 1;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--border-color);
    }

    .modal-title {
      font-size: 1.5rem;
      color: var(--text-primary);
      margin: 0;
      font-weight: 600;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-muted);
      transition: all 0.3s ease;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .close-btn:hover {
      color: var(--text-primary);
      background: var(--bg-secondary);
    }

    .modal-form-group {
      margin-bottom: 20px;
    }

    .modal-form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.9375rem;
    }

    .modal-form-group input,
    .modal-form-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border-color);
      border-radius: 6px;
      font-size: 0.9375rem;
      transition: all 0.3s ease;
      background: var(--bg-secondary);
    }

    .modal-form-group input:focus,
    .modal-form-group select:focus {
      outline: none;
      border-color: var(--accent-primary);
      background: white;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid var(--border-color);
    }

    .modal-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9375rem;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-btn-primary {
      background: var(--accent-primary);
      color: white;
    }

    .modal-btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .modal-btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-secondary);
    }

    .modal-btn-secondary:hover {
      background: var(--border-color);
      color: var(--text-primary);
    }

    .modal-btn-add {
      background: var(--success);
      color: white;
    }

    .modal-btn-add:hover {
      background: var(--success-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    }

    .modal-btn-archive {
      background: var(--warning);
      color: #212529;
    }

    .modal-btn-archive:hover {
      background: #e0a800;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
    }

    .success-message,
    .modal-error-message {
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 20px;
      display: none;
      align-items: center;
      gap: 8px;
      font-size: 0.9375rem;
    }

    .success-message {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .modal-error-message {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .success-message.show,
    .modal-error-message.show {
      display: flex;
      animation: slideInUp 0.3s ease;
    }

    .archive-confirmation {
      text-align: center;
      padding: 20px 0;
    }

    .archive-icon {
      font-size: 4rem;
      color: var(--warning);
      margin-bottom: 20px;
    }

    .employee-info {
      background: var(--bg-secondary);
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
      border-left: 4px solid var(--warning);
      text-align: left;
    }

    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 350px;
    }

    .notification {
      background: white;
      padding: 16px 20px;
      border-radius: 8px;
      border-left: 4px solid var(--danger);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(400px);
      animation: slideInRight 0.3s ease forwards;
    }

    .notification.success {
      border-left-color: var(--success);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideInUp {
      from { 
        transform: translateY(20px);
        opacity: 0;
      }
      to { 
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @media (max-width: 1400px) {
      .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      }
    }

    @media (max-width: 1200px) {
      .card-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 200px;
      }
      
      .main-content {
        margin-left: 200px;
        padding: 20px;
      }

      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }

      .action-bar {
        flex-direction: column;
        align-items: stretch;
      }

      .search-container {
        max-width: 100%;
      }

      .card-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .sidebar {
        transform: translateX(-100%);
      }

      .main-content {
        margin-left: 0;
        padding: 16px;
      }

      .header h1 {
        font-size: 1.5rem;
      }
    }
    /* Red notification dot */
.red-dot {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 8px;
  height: 8px;
  background: #dc3545;
  border-radius: 50%;
  animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
  0%, 100% {
    opacity: 1;
    transform: translateY(-50%) scale(1);
  }
  50% {
    opacity: 0.6;
    transform: translateY(-50%) scale(1.2);
  }
}
/* Mobile Menu Toggle Button */
.mobile-menu-toggle {
  display: none;
  position: fixed;
  top: 16px;
  left: 16px;
  width: 48px;
  height: 48px;
  background: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 1001;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.mobile-menu-toggle span {
  width: 24px;
  height: 3px;
  background: #0b1a50;
  border-radius: 2px;
  transition: all 0.3s ease;
}

.mobile-menu-toggle.active span:nth-child(1) {
  transform: rotate(45deg) translate(7px, 7px);
}

.mobile-menu-toggle.active span:nth-child(2) {
  opacity: 0;
}

.mobile-menu-toggle.active span:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -7px);
}

.sidebar-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.sidebar-overlay.active {
  display: block;
  opacity: 1;
}

/* Desktop - No Changes Needed */
@media (min-width: 1200px) {
  .card-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 24px;
  }
}

/* Laptop/Medium Desktop (1024px - 1199px) */
@media (max-width: 1199px) {
  .sidebar {
    width: 240px;
  }
  
  .main-content {
    margin-left: 240px;
    padding: 28px;
  }
  
  .card-grid {
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px;
  }
}

/* Tablet Landscape (768px - 1023px) */
@media (max-width: 1023px) {
  .sidebar {
    width: 220px;
  }
  
  .main-content {
    margin-left: 220px;
    padding: 24px;
  }
  
  .header {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
  }
  
  .back-button {
    width: 100%;
    justify-content: center;
  }
  
  .action-bar {
    flex-direction: column;
    gap: 16px;
  }
  
  .search-container {
    max-width: 100%;
  }
  
  .action-bar > div:last-child {
    flex-wrap: wrap;
  }
  
  .card-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }
}

/* Tablet Portrait & Large Mobile (481px - 767px) */
@media (max-width: 767px) {
  /* Show mobile menu toggle */
  .mobile-menu-toggle {
    display: flex;
  }
  
  /* Hide sidebar by default, show when active */
  .sidebar {
    width: 260px;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    box-shadow: none;
  }
  
  .sidebar.active {
    transform: translateX(0);
    box-shadow: 4px 0 12px rgba(0,0,0,0.2);
  }
  
  /* Full width main content */
  .main-content {
    margin-left: 0;
    padding: 24px 16px;
    padding-top: 72px; /* Space for mobile menu button */
  }
  
  /* Header adjustments */
  .header {
    flex-direction: column;
    align-items: stretch;
    gap: 14px;
    margin-bottom: 24px;
  }
  
  .header h1 {
    font-size: 1.5rem;
  }
  
  /* Action bar - stack vertically */
  .action-bar {
    flex-direction: column;
    padding: 16px;
    gap: 12px;
  }
  
  .search-container {
    width: 100%;
  }
  
  /* View toggle and add button container */
  .action-bar > div:last-child {
    flex-direction: column;
    width: 100%;
    gap: 12px;
  }
  
  /* View toggle buttons - full width */
  .action-bar > div:last-child > div:first-child {
    width: 100%;
    display: flex;
  }
  
  .view-toggle-btn {
    flex: 1;
    justify-content: center;
    padding: 12px 16px;
    font-size: 0.875rem;
    min-height: 44px; /* Touch target */
  }
  
  .add-button {
    width: 100%;
    justify-content: center;
    padding: 14px 20px;
    min-height: 44px; /* Touch target */
  }
  
  /* Card grid - 2 columns on tablet */
  .card-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
  }
  
  .profile-card {
    padding: 16px;
  }
  
  .avatar-placeholder {
    width: 64px;
    height: 64px;
    font-size: 24px;
    margin-bottom: 12px;
  }
  
  .profile-card h3 {
    font-size: 1rem;
    margin-bottom: 10px;
  }
  
  .profile-card p {
    font-size: 0.875rem;
    margin-bottom: 6px;
  }
  
  .task-badge {
    font-size: 0.75rem;
    padding: 6px 12px;
  }
  
  /* Action buttons - improved touch targets */
  .action-buttons-container {
    flex-direction: column;
    gap: 8px;
    margin-top: 14px;
  }
  
  .edit-button,
  .archive-button,
  .restore-button {
    width: 100%;
    padding: 10px 16px;
    font-size: 0.875rem;
    min-height: 44px;
  }
  
  /* Modal adjustments */
  .modal {
    width: 92%;
    max-width: 500px;
    padding: 24px;
    max-height: 80vh;
  }
  
  .modal-title {
    font-size: 1.25rem;
  }
  
  .modal-actions {
    flex-direction: column-reverse;
    gap: 10px;
  }
  
  .modal-btn {
    width: 100%;
    justify-content: center;
    min-height: 44px;
  }
  
  /* Notifications */
  .notification-container {
    right: 12px;
    left: 12px;
    top: 72px;
  }
}

/* Small Mobile (320px - 480px) */
@media (max-width: 480px) {
  .main-content {
    padding: 16px 12px;
    padding-top: 68px;
  }
  
  .header h1 {
    font-size: 1.25rem;
  }
  
  .action-bar {
    padding: 14px;
  }
  
  /* Single column layout */
  .card-grid {
    grid-template-columns: 1fr;
    gap: 12px;
  }
  
  .profile-card {
    padding: 16px;
  }
  
  .avatar-placeholder {
    width: 60px;
    height: 60px;
    font-size: 22px;
  }
  
  .profile-card h3 {
    font-size: 0.9375rem;
  }
  
  .profile-card p {
    font-size: 0.8125rem;
  }
  
  .task-badge {
    font-size: 0.7rem;
    padding: 5px 10px;
  }
  
  /* Smaller buttons for very small screens */
  .edit-button,
  .archive-button {
    padding: 10px 14px;
    font-size: 0.8125rem;
  }
  
  /* Modal */
  .modal {
    width: 94%;
    padding: 20px;
  }
  
  .modal-form-group input,
  .modal-form-group select {
    padding: 10px 14px;
    font-size: 0.875rem;
  }
  
  /* Search bar */
  .search-bar {
    padding: 10px 16px;
    font-size: 0.875rem;
  }
  
  .search-btn {
    padding: 10px 16px;
  }
}

/* Extra Small Screens (max-width: 360px) */
@media (max-width: 360px) {
  .main-content {
    padding: 12px 8px;
    padding-top: 64px;
  }
  
  .header h1 {
    font-size: 1.125rem;
  }
  
  .avatar-placeholder {
    width: 56px;
    height: 56px;
    font-size: 20px;
  }
  
  .profile-card h3 {
    font-size: 0.875rem;
  }
  
  .profile-card p {
    font-size: 0.75rem;
  }
}

/* Landscape orientation fixes */
@media (max-width: 767px) and (orientation: landscape) {
  .card-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .modal {
    max-height: 70vh;
  }
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
  /* Increase all interactive element sizes */
  .edit-button,
  .archive-button,
  .add-button,
  .view-toggle-btn,
  .search-btn,
  .modal-btn,
  .back-button {
    min-height: 48px;
    min-width: 48px;
  }
  
  .close-btn {
    min-height: 48px;
    min-width: 48px;
  }
}

/* Prevent horizontal scroll */
@media (max-width: 767px) {
  body {
    overflow-x: hidden;
  }
  
  .dashboard-container {
    overflow-x: hidden;
  }
}

  </style>
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
<div class="sidebar">
  <a href="{% url 'landing_menu' %}">
    <img src="{% static 'Pictures/logo1.png' %}" alt="DILG Logo" class="logo">
  </a>
  <div class="menu-title">Navigation</div>
  <ul class="nav-menu">
    <li>
      <a href="{% url 'dashboard' %}">
         Dashboard
      </a>
    </li>
    
    <li>
      <a href="{% url 'application_request' %}" style="position: relative;">
         Application Request
        {% if pending_applications_count > 0 %}
        <span class="red-dot"></span>
        {% endif %}
      </a>
    </li>
    
    <li>
      <a href="{% url 'pending_users' %}" style="position: relative;">
         User Approvals
        {% if pending_count > 0 %}
        <span class="red-dot"></span>
        {% endif %}
      </a>
    </li>
    
    <li>
      <a href="{% url 'employees_profile' %}"class="active">
         Employees Profile
      </a>
    </li>
    
    <li>
      <a href="{% url 'folder' %}" style="position: relative;">
         Folders
        {% if monitoring_count > 0 or certification_count > 0 %}
        <span class="red-dot"></span>
        {% endif %}
      </a>
    </li>
    
    <li>
      <a href="{% url 'settings' %}">
         Settings
      </a>
    </li>
  </ul>
</div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <h1>Employees Profile</h1>
        <a href="{% url 'dashboard' %}" class="back-button">
          <i class="fa fa-arrow-left"></i> Back to Dashboard
        </a>
      </div>

      <!-- Action Bar -->
      <div class="action-bar">
        <div class="search-container">
          <form method="GET" class="search-form" id="searchForm">
            <input 
              type="text" 
              name="search" 
              id="searchInput"
              placeholder="Search employees by name, ID, or task..." 
              class="search-bar" 
              value="{{ request.GET.search }}"
            >
            <button type="submit" class="search-btn">
              <i class="fa fa-search"></i>
            </button>
          </form>
        </div>

        <div style="display: flex; gap: 12px; align-items: center;">
          <!-- View Toggle Buttons -->
          <div style="display: flex; gap: 8px; background: var(--bg-secondary); padding: 4px; border-radius: 6px;">
            <button type="button" class="view-toggle-btn active" id="activeViewBtn" onclick="switchView('active')">
              <i class="fa fa-users"></i> Active
            </button>
            <button type="button" class="view-toggle-btn" id="archivedViewBtn" onclick="switchView('archived')">
              <i class="fa fa-archive"></i> Archived
            </button>
          </div>

          <button type="button" class="add-button" onclick="openAddModal()">
            <i class="fa fa-plus"></i> Add Employee
          </button>
        </div>
      </div>

      <!-- Messages -->
      {% if messages %}
        <div class="notification-container">
          {% for message in messages %}
            <div class="notification {{ message.tags }}">
              <span>{{ message }}</span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Employee Cards Grid -->
      <div class="card-grid" id="employeeCardsGrid">
        {% for emp in page_obj %}
        <div class="profile-card {% if emp.archived %}archived{% endif %}" 
             data-employee-id="{{ emp.id }}"
             data-archived="{{ emp.archived|yesno:'true,false' }}">
          <div class="avatar-placeholder">
            {{ emp.name|first|upper }}
          </div>
          <h3 class="employee-name">{{ emp.name }}</h3>
          <p>ID No. <strong class="employee-id">{{ emp.id_no }}</strong></p>
          <p>Task Assignment: <strong class="employee-task">{{ emp.task }}</strong></p>
          <div style="text-align: center;">
            <span class="task-badge">{{ emp.task }}</span>
            {% if emp.archived %}
            <span class="task-badge" style="background: var(--text-muted); margin-left: 8px;">Archived</span>
            {% endif %}
          </div>
          <div class="action-buttons-container">
            {% if emp.archived %}
            <button class="restore-button edit-button" 
                    data-name="{{ emp.name }}" 
                    data-id-no="{{ emp.id_no }}" 
                    data-emp-id="{{ emp.id }}">
              <i class="fa fa-undo"></i> Restore
            </button>
            {% else %}
            <button class="edit-button" 
                    data-name="{{ emp.name }}" 
                    data-id-no="{{ emp.id_no }}" 
                    data-task="{{ emp.task }}" 
                    data-emp-id="{{ emp.id }}">
              <i class="fa fa-edit"></i> Edit
            </button>
            <button class="archive-button" 
                    data-name="{{ emp.name }}" 
                    data-id-no="{{ emp.id_no }}" 
                    data-emp-id="{{ emp.id }}">
              <i class="fa fa-archive"></i> Archive
            </button>
            {% endif %}
          </div>
        </div>
        {% empty %}
        <div style="grid-column: 1/-1; text-align: center; padding: 60px 20px; background: var(--bg-primary); border-radius: 8px; box-shadow: var(--shadow);">
          <i class="fa fa-users" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;"></i>
          <h3 style="color: var(--text-primary); margin-bottom: 10px;">No employees found</h3>
          <p style="color: var(--text-secondary);">Click "Add Employee" to get started!</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Add Employee Modal -->
  <div class="modal-overlay" id="addModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Add New Employee</h2>
        <button class="close-btn" onclick="closeAddModal()">×</button>
      </div>

      <div class="success-message" id="addSuccessMessage">
        <i class="fa fa-check-circle"></i>
        Employee added successfully!
      </div>

      <div class="modal-error-message" id="addModalError">
        <i class="fa fa-exclamation-triangle"></i>
        <span id="addModalErrorText">Error message will appear here</span>
      </div>

      <form id="addForm">
        {% csrf_token %}
        
        <div class="modal-form-group">
          <label for="addEmployeeName">Full Name</label>
          <input type="text" id="addEmployeeName" name="name" required>
        </div>

        <div class="modal-form-group">
          <label for="addEmployeeId">ID Number</label>
          <input type="text" id="addEmployeeId" name="id_no" required>
        </div>

        <div class="modal-form-group">
          <label for="addEmployeeTask">Task Assignment</label>
          <select id="addEmployeeTask" name="task" required>
            <option value="">Select a task...</option>
            <option value="Documentation">Documentation</option>
            <option value="Monitoring">Monitoring</option>
            <option value="Filing">Filing</option>
            <option value="Supervision">Supervision</option>
          </select>
        </div>

        <div class="modal-actions">
          <button type="button" class="modal-btn modal-btn-secondary" onclick="closeAddModal()">
            <i class="fa fa-times"></i> Cancel
          </button>
          <button type="submit" class="modal-btn modal-btn-add">
            <i class="fa fa-plus"></i> Add Employee
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Employee Modal -->
  <div class="modal-overlay" id="editModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Edit Employee</h2>
        <button class="close-btn" onclick="closeEditModal()">×</button>
      </div>

      <div class="success-message" id="successMessage">
        <i class="fa fa-check-circle"></i>
        Employee information updated successfully!
      </div>

      <div class="modal-error-message" id="editModalError">
        <i class="fa fa-exclamation-triangle"></i>
        <span id="editModalErrorText">Error message will appear here</span>
      </div>

      <form id="editForm">
        {% csrf_token %}
        <input type="hidden" id="employeePrimaryId" name="employee_id">
        
        <div class="modal-form-group">
          <label for="employeeName">Full Name</label>
          <input type="text" id="employeeName" name="name" required>
        </div>

        <div class="modal-form-group">
          <label for="employeeId">ID Number</label>
          <input type="text" id="employeeId" name="id_no" required>
        </div>

        <div class="modal-form-group">
          <label for="employeeTask">Task Assignment</label>
          <select id="employeeTask" name="task" required>
            <option value="">Select a task...</option>
            <option value="Documentation">Documentation</option>
            <option value="Monitoring">Monitoring</option>
            <option value="Filing">Filing</option>
            <option value="Supervision">Supervision</option>
          </select>
        </div>

        <div class="modal-actions">
          <button type="button" class="modal-btn modal-btn-secondary" onclick="closeEditModal()">
            <i class="fa fa-times"></i> Cancel
          </button>
          <button type="submit" class="modal-btn modal-btn-primary">
            <i class="fa fa-save"></i> Save Changes
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Archive Confirmation Modal -->
  <div class="modal-overlay" id="archiveModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">Archive Employee</h2>
        <button class="close-btn" onclick="closeArchiveModal()">×</button>
      </div>

      <div class="success-message" id="archiveSuccessMessage">
        <i class="fa fa-check-circle"></i>
        Employee archived successfully!
      </div>

      <div class="archive-confirmation">
        <div class="archive-icon">
          <i class="fa fa-archive"></i>
        </div>
        <h3>Are you sure you want to archive this employee?</h3>
        <p style="color: var(--text-secondary);">The employee data will be moved to the archive. You can restore it later if needed.</p>
        
        <div class="employee-info" id="archiveEmployeeInfo">
          <!-- Employee info will be populated here -->
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="modal-btn modal-btn-secondary" onclick="closeArchiveModal()">
          <i class="fa fa-times"></i> Cancel
        </button>
        <button type="button" class="modal-btn modal-btn-archive" onclick="confirmArchive()">
          <i class="fa fa-archive"></i> Archive Employee
        </button>
      </div>
    </div>
  </div>

  <!-- Notification Container -->
  <div class="notification-container" id="notificationContainer"></div>

  <script>
    // Modal elements
    const editModal = document.getElementById('editModal');
    const addModal = document.getElementById('addModal');
    const archiveModal = document.getElementById('archiveModal');
    const editForm = document.getElementById('editForm');
    const addForm = document.getElementById('addForm');
    const successMessage = document.getElementById('successMessage');
    const addSuccessMessage = document.getElementById('addSuccessMessage');
    const archiveSuccessMessage = document.getElementById('archiveSuccessMessage');
    const addModalError = document.getElementById('addModalError');
    const addModalErrorText = document.getElementById('addModalErrorText');
    const editModalError = document.getElementById('editModalError');
    const editModalErrorText = document.getElementById('editModalErrorText');
    
    let employeeToArchive = null;

    // Initialize event listeners when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeEditButtons();
      initializeArchiveButtons();
      initializeRestoreButtons();
      
      // Load saved view preference or default to active
      const savedView = localStorage.getItem('employeeView') || 'active';
      switchView(savedView);
    });

    function initializeEditButtons() {
      const editButtons = document.querySelectorAll('.edit-button:not(.restore-button)');
      editButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          const name = this.getAttribute('data-name');
          const idNo = this.getAttribute('data-id-no');
          const task = this.getAttribute('data-task');
          const empId = this.getAttribute('data-emp-id');
          
          openEditModal(name, idNo, task, empId);
        });
      });
    }

    function initializeArchiveButtons() {
      const archiveButtons = document.querySelectorAll('.archive-button');
      archiveButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          const name = this.getAttribute('data-name');
          const idNo = this.getAttribute('data-id-no');
          const empId = this.getAttribute('data-emp-id');
          
          openArchiveModal(name, idNo, empId);
        });
      });
    }

    function initializeRestoreButtons() {
      const restoreButtons = document.querySelectorAll('.restore-button');
      restoreButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          const name = this.getAttribute('data-name');
          const idNo = this.getAttribute('data-id-no');
          const empId = this.getAttribute('data-emp-id');
          
          restoreEmployee(empId, name);
        });
      });
    }

    // Switch between Active and Archived views
    function switchView(view) {
      const activeBtn = document.getElementById('activeViewBtn');
      const archivedBtn = document.getElementById('archivedViewBtn');
      const allCards = document.querySelectorAll('.profile-card');
      
      // Update button states
      if (view === 'active') {
        activeBtn.classList.add('active');
        archivedBtn.classList.remove('active');
        
        // Show only active employees
        allCards.forEach(card => {
          const isArchived = card.getAttribute('data-archived') === 'true';
          card.style.display = isArchived ? 'none' : 'block';
        });
      } else {
        activeBtn.classList.remove('active');
        archivedBtn.classList.add('active');
        
        // Show only archived employees
        allCards.forEach(card => {
          const isArchived = card.getAttribute('data-archived') === 'true';
          card.style.display = isArchived ? 'block' : 'none';
        });
      }
      
      // Save preference
      localStorage.setItem('employeeView', view);
      
      // Check if there are any visible cards
      checkEmptyState(view);
    }

    function checkEmptyState(view) {
      const visibleCards = Array.from(document.querySelectorAll('.profile-card'))
        .filter(card => card.style.display !== 'none' && !card.id);
      
      let emptyMessage = document.getElementById('emptyStateMessage');
      
      if (visibleCards.length === 0) {
        if (!emptyMessage) {
          emptyMessage = document.createElement('div');
          emptyMessage.id = 'emptyStateMessage';
          emptyMessage.style.cssText = `
            grid-column: 1/-1;
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-primary);
            border-radius: 8px;
            box-shadow: var(--shadow);
          `;
          document.getElementById('employeeCardsGrid').appendChild(emptyMessage);
        }
        
        if (view === 'archived') {
          emptyMessage.innerHTML = `
            <i class="fa fa-archive" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;"></i>
            <h3 style="color: var(--text-primary); margin-bottom: 10px;">No archived employees</h3>
            <p style="color: var(--text-secondary);">Archived employees will appear here</p>
          `;
        } else {
          emptyMessage.innerHTML = `
            <i class="fa fa-users" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;"></i>
            <h3 style="color: var(--text-primary); margin-bottom: 10px;">No active employees</h3>
            <p style="color: var(--text-secondary);">Click "Add Employee" to get started!</p>
          `;
        }
        emptyMessage.style.display = 'block';
      } else if (emptyMessage) {
        emptyMessage.style.display = 'none';
      }
    }

    // Restore archived employee
    function restoreEmployee(employeeId, employeeName) {
      if (!confirm(`Are you sure you want to restore ${employeeName}?`)) {
        return;
      }

      fetch(`/api/employees/restore/${employeeId}/`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify({ archived: false })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        if (data.success) {
          showNotification('Employee restored successfully!', 'success');
          setTimeout(() => {
            location.reload();
          }, 1000);
        } else {
          showNotification('Error restoring employee: ' + (data.error || 'Unknown error'));
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showNotification('Error restoring employee. Please try again.');
      });
    }

    // Utility functions for error handling
    function showAddError(message) {
      addModalErrorText.textContent = message;
      addModalError.classList.add('show');
      addSuccessMessage.classList.remove('show');
    }

    function hideAddError() {
      addModalError.classList.remove('show');
    }

    function showEditError(message) {
      editModalErrorText.textContent = message;
      editModalError.classList.add('show');
      successMessage.classList.remove('show');
    }

    function hideEditError() {
      editModalError.classList.remove('show');
    }

    function showNotification(message, type = 'error') {
      const container = document.getElementById('notificationContainer');
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      
      const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle';
      notification.innerHTML = `
        <i class="fa ${icon}"></i>
        <span>${message}</span>
        <button onclick="this.parentElement.remove()" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 1.2rem; color: inherit;">×</button>
      `;
      
      container.appendChild(notification);
      
      setTimeout(() => {
        if (notification.parentElement) {
          notification.remove();
        }
      }, 5000);
    }

    function openAddModal() {
      addModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      hideAddError();
    }

    function closeAddModal() {
      addModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      addSuccessMessage.classList.remove('show');
      hideAddError();
      addForm.reset();
    }

    function openEditModal(name, idNo, task, primaryId) {
      document.getElementById('employeeName').value = name || '';
      document.getElementById('employeeId').value = idNo || '';
      document.getElementById('employeeTask').value = task || '';
      document.getElementById('employeePrimaryId').value = primaryId || '';

      editModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      hideEditError();
    }

    function closeEditModal() {
      editModal.classList.remove('active');
      document.body.style.overflow = 'auto'; 
      successMessage.classList.remove('show');
      hideEditError();
      editForm.reset();
    }

    function openArchiveModal(name, idNo, employeeId) {
      employeeToArchive = employeeId;
      
      document.getElementById('archiveEmployeeInfo').innerHTML = `
        <strong>Name:</strong> ${name}<br>
        <strong>ID Number:</strong> ${idNo}
      `;
      
      archiveModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeArchiveModal() {
      archiveModal.classList.remove('active');
      document.body.style.overflow = 'auto';
      archiveSuccessMessage.classList.remove('show');
      employeeToArchive = null;
    }

    function confirmArchive() {
      if (!employeeToArchive) return;

      fetch(`/api/employees/archive/${employeeToArchive}/`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify({ archived: true })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json();
      })
      .then(data => {
        if (data.success) {
          archiveSuccessMessage.classList.add('show');
          
          setTimeout(() => {
            closeArchiveModal();
            location.reload();
          }, 1500);
        } else {
          showNotification('Error archiving employee: ' + (data.error || 'Unknown error'));
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showNotification('Error archiving employee. Please try again.');
      });
    }

    // Close modals when clicking outside
    [addModal, editModal, archiveModal].forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          if (modal === addModal) closeAddModal();
          if (modal === editModal) closeEditModal();
          if (modal === archiveModal) closeArchiveModal();
        }
      });
    });

    // Close modals with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (addModal.classList.contains('active')) closeAddModal();
        if (editModal.classList.contains('active')) closeEditModal();
        if (archiveModal.classList.contains('active')) closeArchiveModal();
      }
    });

    // Add employee form submission
    addForm.addEventListener('submit', function(e) {
      e.preventDefault();
      hideAddError();
      
      const formData = new FormData(addForm);
      const name = formData.get('name');
      const id_no = formData.get('id_no');
      const task = formData.get('task');

      if (!name.trim()) {
        showAddError('Please enter a valid name');
        return;
      }
      if (!id_no.trim()) {
        showAddError('Please enter a valid ID number');
        return;
      }
      if (!task) {
        showAddError('Please select a task assignment');
        return;
      }

      fetch('/employees/', {  
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'X-CSRFToken': getCookie('csrftoken')
        },
        body: `name=${encodeURIComponent(name)}&id_no=${encodeURIComponent(id_no)}&task=${encodeURIComponent(task)}`
      })
      .then(response => {
        if (response.ok) {
          addSuccessMessage.classList.add('show');
          hideAddError();
      
          setTimeout(() => {
            closeAddModal();
            location.reload(); 
          }, 1500);
        } else if (response.status === 400) {
          return response.json().then(data => {
            showAddError(data.error || 'Invalid data provided');
          });
        } else {
          showAddError('Error adding employee. Please try again.');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showAddError('Network error. Please try again.');
      });
    });

    // Edit employee form submission
    editForm.addEventListener('submit', function(e) {
      e.preventDefault();
      hideEditError();
      
      const formData = new FormData(editForm);
      const employeeId = formData.get('employee_id');
      const name = formData.get('name');
      const id_no = formData.get('id_no');
      const task = formData.get('task');

      if (!employeeId) {
        showEditError('Employee ID is missing. Please try again.');
        return;
      }

      if (!name.trim()) {
        showEditError('Please enter a valid name');
        return;
      }
      if (!id_no.trim()) {
        showEditError('Please enter a valid ID number');
        return;
      }
      if (!task) {
        showEditError('Please select a task assignment');
        return;
      }

      fetch(`/api/employees/edit/${employeeId}/`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify({ name, id_no, task })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          successMessage.classList.add('show');
          hideEditError();

          updateEmployeeCard(employeeId, { name, id_no, task });

          setTimeout(() => {
            closeEditModal();
            location.reload(); 
          }, 1500);
        } else {
          showEditError('Error updating employee: ' + (data.error || 'Unknown error'));
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showEditError('Network error. Please try again.');
      });
    });

    // Search functionality
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');
    const allCards = document.querySelectorAll('.profile-card');

    searchInput.addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase().trim();
      filterEmployees(searchTerm);
    });

    searchForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const searchTerm = searchInput.value.toLowerCase().trim();
      filterEmployees(searchTerm);
    });

    function filterEmployees(searchTerm) {
      let visibleCount = 0;

      allCards.forEach(card => {
        const nameElement = card.querySelector('.employee-name');
        const idElement = card.querySelector('.employee-id');
        const taskElement = card.querySelector('.employee-task');
        
        if (nameElement && idElement && taskElement) {
          const name = nameElement.textContent.toLowerCase();
          const idNo = idElement.textContent.toLowerCase();
          const task = taskElement.textContent.toLowerCase();

          const matches = name.includes(searchTerm) || 
                         idNo.includes(searchTerm) || 
                         task.includes(searchTerm);

          if (matches || searchTerm === '') {
            card.style.display = 'block';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        }
      });

      showNoResultsMessage(visibleCount, searchTerm);
    }

    function showNoResultsMessage(visibleCount, searchTerm) {
      const cardGrid = document.querySelector('.card-grid');
      let noResultsDiv = document.getElementById('noResultsMessage');

      if (visibleCount === 0 && searchTerm !== '') {
        if (!noResultsDiv) {
          noResultsDiv = document.createElement('div');
          noResultsDiv.id = 'noResultsMessage';
          noResultsDiv.style.cssText = `
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-primary);
            border-radius: 8px;
            box-shadow: var(--shadow);
          `;
          cardGrid.appendChild(noResultsDiv);
        }
        noResultsDiv.innerHTML = `
          <i class="fa fa-search" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;"></i>
          <h3 style="color: var(--text-primary); margin-bottom: 10px;">No employees found</h3>
          <p style="color: var(--text-secondary);">No employees match your search for "${searchTerm}"</p>
        `;
        noResultsDiv.style.display = 'block';
      } else if (noResultsDiv) {
        noResultsDiv.style.display = 'none';
      }
    }

    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }

    function updateEmployeeCard(employeeId, data) {
      const card = document.querySelector(`[data-employee-id="${employeeId}"]`);
      if (card) {
        const nameElement = card.querySelector('.employee-name');
        if (nameElement) nameElement.textContent = data.name;
        
        const idElement = card.querySelector('.employee-id');
        if (idElement) idElement.textContent = data.id_no;
        
        const taskElement = card.querySelector('.employee-task');
        if (taskElement) taskElement.textContent = data.task;
        
        const badgeElement = card.querySelector('.task-badge');
        if (badgeElement) {
          badgeElement.textContent = data.task;
        }
        
        const editButton = card.querySelector('.edit-button');
        const archiveButton = card.querySelector('.archive-button');
        
        if (editButton) {
          editButton.setAttribute('data-name', data.name);
          editButton.setAttribute('data-id-no', data.id_no);
          editButton.setAttribute('data-task', data.task);
        }
        
        if (archiveButton) {
          archiveButton.setAttribute('data-name', data.name);
          archiveButton.setAttribute('data-id-no', data.id_no);
        }
        
        const avatarElement = card.querySelector('.avatar-placeholder');
        if (avatarElement) {
          avatarElement.textContent = data.name.charAt(0).toUpperCase();
        }
      }
    }
  </script>
</body>
</html>